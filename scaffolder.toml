### Typescript Webpack starter

[[projects]]
names = ["rust-wasm-web"]
description = "A rust wasm starter project bundled with vite"

[[projects.steps]]
type = "command"
command = "yarn"
args =  ["create", "vite", ".", "--template", "vanilla-ts"]

[[projects.steps]]
type = "command"
command = "yarn"
args =  []


[[projects.steps]]
type = "command"
command = "yarn"
args =  ["add", "-D", "vite", "vite-plugin-wasm-pack"]

[[projects.steps]]
type = "command"
command = "cargo"
args =  ["init", "--lib", "innards"]


[[projects.steps]]
type = "create"
file = "Cargo.toml"
contents = """ \
[workspace]
members = ["innards"]
"""

[[projects.steps]]
type = "copy"
src_file = "rust-wasm-web/vite.config.ts"
dest_file = "vite.config.ts"

[[projects.steps]]
type = "copy"
src_file = "rust-wasm-web/main.ts"
dest_file = "src/main.ts"

[[projects.steps]]
type = "copy"
src_file = "rust-wasm-web/lib.rs"
dest_file = "innards/src/lib.rs"

[[projects.steps]]
type = "append"
file = "innards/Cargo.toml"
contents = """

[lib]
crate-type = ["cdylib"]
"""

[[projects.steps]]
type = "append"
file = ".gitignore"
contents = """

target
"""

[[projects.steps]]
type = "remove"
file = "public/vite.svg"

[[projects.steps]]
type = "remove"
file = "src/typescript.svg"

[[projects.steps]]
type = "remove"
file = "src/counter.ts"

[[projects.steps]]
type = "template"
template = "package.json"
dest_file = "package.json"
[projects.steps.replacements]
main = ""
type = "module"
scripts = """
        "dev": "wasm-pack build ./innards --target web && yarn build && tsc && yarn preview",
        "build": "vite build",
        "preview": "vite preview"
"""

[[projects.steps]]
type = "multicommand"
command = """cd innards \
        && cargo add wasm-bindgen \
        && cargo add console_error_panic_hook \
"""

[[projects.steps]]
type = "command"
command = "yarn"
args =  ["add", "-D", "vite-plugin-wasm-pack", "typescript", "vite" ]

[[projects.steps]]
type = "command"
command = "wasm-pack"
args =  ["build", "./innards", "--target", "web"]

